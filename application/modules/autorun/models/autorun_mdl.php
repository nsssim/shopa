<?phpif ( ! defined('BASEPATH')) exit('No direct script access allowed');class autorun_mdl extends CI_Model{      function __construct()    {         parent::__construct();    }	public function test()	{		$qry_str = '         	INSERT INTO test SET         	time = NOW()';        	$q = $this->db->query($qry_str);        	return $q;  	}	public function get_mysql_time_now()	{			$qry_str = '         	SELECT NOW() as `now`';        	$q = $this->db->query($qry_str);        	return $q->result()[0];  	}		public function get_orders_column_no_email($column_name)	{ 		$qry_str = '       		SELECT			*			FROM `orders_detail`			WHERE			(orders_detail.'.$column_name.'_email_sent_flag = 0 			OR			orders_detail.'.$column_name.'_email_sent_flag IS NULL) 			AND			orders_detail.'.$column_name.' = 1';        $q = $this->db->query($qry_str);        return $q->result();          		}			public function get_order_cusomer_info($order_id)	{		$qry_str ='		SELECT		customers.id,		customers.email,		customers.first_name,		customers.last_name,		customers.phone,		customers.alt_phone,		customers.username,		customers.birthdate		FROM		orders		INNER JOIN customers ON orders.customer_id_fk = customers.id		WHERE		orders.id = '.$order_id;		$q = $this->db->query($qry_str);        return $q->result();  	}	public function set_column_email_sent_flag($column_name,$order_id,$status) 	{		$qry_str = ' UPDATE `orders_detail` SET `'.$column_name.'`= '.$status.' WHERE `order_id_fk`='.$order_id;        $q = $this->db->query($qry_str);        return $q; 	}		//////////////////////////////// talking to categories bellow ///////////////////////////////////////////		public function record_exists($tablename,$fieldname,$value)	{		$qry_str = 'SELECT EXISTS(SELECT 1 FROM `'.$tablename.'` WHERE `'.$tablename.'`.'.$fieldname.' = "'.$value.'") as exist;';		$q = $this->db->query($qry_str);        $r = $q->result(); 				if($r[0]->exist == 1 ) 			return TRUE;		else 			return FALSE;	} 		public function add_root_category($cat_id,$cat_idd)	{		$qry_str=' insert into categories SET 					`idd` = "'.$cat_idd.'",					`id` = "'.$cat_id.'",					`parent_idd` = NULL ,					`date_add` = NOW() ,					`date_upd` = NOW() ,					`max_depth` = "20"				';        $q = $this->db->query($qry_str);        return $q;  	}		public function add_category_lang($LastCategoryID,$lang_id,$name,$short_name,$localizedId)	{		$qry_str=' insert into category_lang SET 					`id_category` = "'.$LastCategoryID.'",					`id_shop` = 1 ,					`id_lang` = '.$lang_id.' ,					`name` = "'.$name.'",					`shortName` = "'.$short_name.'",					`localizedId` = "'.$localizedId.'"					';        $q = $this->db->query($qry_str);        return $q;  	}		public function get_cat_id($idd)	{		$qry_str =' SELECT					categories.id					FROM					categories					WHERE					categories.idd ="'.$idd.'"';				$q = $this->db->query($qry_str);        return $q->result()[0]->id;  	}		public function add_category($cat_id,$cat_idd,$parent_id,$parent_idd,$has_color_filter,$has_heel_height_filter,$has_size_filter)	{                $qry_str=' insert into categories SET 					`id` = "'.$cat_id.'",					`idd` = "'.$cat_idd.'",					`parent_idd` = "'.$parent_idd.'",					`parent_id` = "'.$parent_id.'",					`date_add` = NOW() ,					`date_upd` = NOW() ,					`max_depth` = "20",					`has_color_filter` = "'.$has_color_filter.'",					`has_heel_height_filter` = "'.$has_heel_height_filter.'",					`has_size_filter` = "'.$has_size_filter.'"					';				        $q = $this->db->query($qry_str);        return $q;					}		public function get_categories_id()	{		$qry_str ='SELECT id,idd FROM `categories`';				$q = $this->db->query($qry_str);        return $q->result();  	    }        public function delete_category($current_cat_id)    {		$qry_str=' DELETE FROM `categories` where id = '.$current_cat_id;        $q = $this->db->query($qry_str);        return $q;	}	}